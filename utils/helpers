_G.UniversalUtility = _G.UniversalUtility or {}
_G.UniversalUtility.ActiveThreads = {}
_G.UniversalUtility.Debounces = {}

_G.UniversalUtility.KeyCodeNames = {}
_G.UniversalUtility.KeyCodeMap = {}

for i = 65, 90 do
    local char = string.char(i)
    _G.UniversalUtility.KeyCodeNames[Enum.KeyCode[char]] = char
    _G.UniversalUtility.KeyCodeMap[char] = Enum.KeyCode[char]
end

local numNames = {"One","Two","Three","Four","Five","Six","Seven","Eight","Nine"}
for i = 0, 9 do
    local keyName = i == 0 and "Zero" or numNames[i]
    _G.UniversalUtility.KeyCodeNames[Enum.KeyCode[keyName]] = tostring(i)
    _G.UniversalUtility.KeyCodeMap[tostring(i)] = Enum.KeyCode[keyName]
end

for i = 1, 12 do
    _G.UniversalUtility.KeyCodeNames[Enum.KeyCode["F" .. i]] = "F" .. i
    _G.UniversalUtility.KeyCodeMap["F" .. i] = Enum.KeyCode["F" .. i]
end

local specialKeys = {
    LeftControl = "Left Ctrl",
    RightControl = "Right Ctrl",
    LeftShift = "Left Shift",
    RightShift = "Right Shift",
    LeftAlt = "Left Alt",
    RightAlt = "Right Alt",
    Tab = "Tab",
    CapsLock = "Caps Lock",
    Space = "Space",
    Return = "Enter",
    Backspace = "Backspace",
    Delete = "Delete",
    Insert = "Insert",
    Home = "Home",
    End = "End",
    PageUp = "Page Up",
    PageDown = "Page Down"
}

for k, v in pairs(specialKeys) do
    _G.UniversalUtility.KeyCodeNames[Enum.KeyCode[k]] = v
end

function _G.UniversalUtility.CleanupAllThreads()
    for threadType, thread in pairs(_G.UniversalUtility.ActiveThreads) do
        if thread then
            if coroutine.status(thread) ~= "dead" then
                task.cancel(thread)
            end
            _G.UniversalUtility.ActiveThreads[threadType] = nil
        end
    end
end

function _G.UniversalUtility.GetExecutorName()
    return (identifyexecutor and identifyexecutor()) or 
           (getexecutorname and getexecutorname()) or 
           "Unknown Executor"
end

print("[Universal Utility] Helpers module loaded")
