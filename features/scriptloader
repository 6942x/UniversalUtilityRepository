local function Execute(code, statusLabel, executeButton)
    if code == "" then
        statusLabel.Text = "Empty script"
        statusLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
        return
    end

    statusLabel.Text = "Executing..."
    statusLabel.TextColor3 = Color3.fromRGB(255, 200, 100)

    local success, err = pcall(function()
        local func = loadstring(code)
        if not func then error("Loadstring failed") end
        func()
    end)

    if success then
        statusLabel.Text = "Executed successfully!"
        statusLabel.TextColor3 = Color3.fromRGB(50, 220, 100)
    else
        statusLabel.Text = "Error - " .. tostring(err):sub(1,60) .. "..."
        statusLabel.TextColor3 = Color3.fromRGB(220, 50, 50)
        warn("ScriptLoader Error:", err)
    end

    task.delay(2.5, function()
        statusLabel.Text = "Ready"
        statusLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    end)
end

return {
    Execute = Execute
}
