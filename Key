Config = {
    api = "2bc06ccb-13d7-4450-9ace-d9fe981de37a", 
    service = "NovaService",
    provider = "NovaProvider"
}

local function main()
    print("Key validated! Loading Nova Hub...")
end

if getgenv().NovaHubKeySystem then return end
getgenv().NovaHubKeySystem = true

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local HttpService = game:GetService("HttpService")

local Theme = {
    Background = Color3.fromRGB(10, 8, 18),
    Surface = Color3.fromRGB(18, 15, 28),
    SurfaceLight = Color3.fromRGB(25, 20, 38),
    Primary = Color3.fromRGB(147, 51, 234),
    PrimaryHover = Color3.fromRGB(168, 85, 247),
    PrimaryLight = Color3.fromRGB(196, 128, 255),
    Secondary = Color3.fromRGB(79, 70, 229),
    Text = Color3.fromRGB(250, 250, 255),
    TextDim = Color3.fromRGB(156, 163, 175),
    Success = Color3.fromRGB(34, 197, 94),
    Error = Color3.fromRGB(239, 68, 68),
    Discord = Color3.fromRGB(88, 101, 242),
    Glow = Color3.fromRGB(147, 51, 234)
}

local KeyData = {
    Name = "Nova Hub",
    DiscordInvite = "https://discord.gg/GhhAMF7B",
    SaveFile = "novahub_key.json"
}

local function Tween(obj, time, props, style, direction)
    local tween = TweenService:Create(
        obj, 
        TweenInfo.new(
            time, 
            style or Enum.EasingStyle.Quint, 
            direction or Enum.EasingDirection.Out
        ), 
        props
    )
    tween:Play()
    return tween
end

local function Create(class, props)
    local obj = Instance.new(class)
    for k, v in pairs(props) do
        if k ~= "Parent" then obj[k] = v end
    end
    if props.Parent then obj.Parent = props.Parent end
    return obj
end

local function SaveKey(key)
    local data = {key = key, timestamp = os.time()}
    writefile(KeyData.SaveFile, HttpService:JSONEncode(data))
end

local function LoadKey()
    if isfile(KeyData.SaveFile) then
        local success, data = pcall(function()
            return HttpService:JSONDecode(readfile(KeyData.SaveFile))
        end)
        if success and data.key then
            return data.key
        end
    end
    return nil
end

local function DeleteKey()
    if isfile(KeyData.SaveFile) then
        delfile(KeyData.SaveFile)
    end
end

local Gui = Create("ScreenGui", {
    Name = "NovaHubKeySystem",
    Parent = CoreGui,
    ResetOnSpawn = false,
    ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
    DisplayOrder = 999
})

local Overlay = Create("Frame", {
    Name = "Overlay",
    Parent = Gui,
    BackgroundColor3 = Color3.fromRGB(0, 0, 0),
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    Size = UDim2.new(1, 0, 1, 0),
    ZIndex = 1
})

local Container = Create("Frame", {
    Name = "Container",
    Parent = Gui,
    BackgroundColor3 = Theme.Background,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, 0, 0.5, 0),
    AnchorPoint = Vector2.new(0.5, 0.5),
    Size = UDim2.new(0, 420, 0, 500),
    ClipsDescendants = true,
    ZIndex = 2
})

Create("UICorner", {CornerRadius = UDim.new(0, 20), Parent = Container})
Create("UIStroke", {
    Parent = Container,
    Color = Theme.Primary,
    Thickness = 2,
    Transparency = 0.7,
    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
})

local GlowTop = Create("Frame", {
    Name = "GlowTop",
    Parent = Container,
    BackgroundColor3 = Theme.Glow,
    BackgroundTransparency = 0.85,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 200),
    ZIndex = 1
})

Create("UIGradient", {
    Parent = GlowTop,
    Color = ColorSequence.new(Theme.Glow),
    Transparency = NumberSequence.new({
        NumberSequenceKeypoint.new(0, 0.4),
        NumberSequenceKeypoint.new(1, 1)
    }),
    Rotation = 0
})

local Header = Create("Frame", {
    Name = "Header",
    Parent = Container,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, 0, 0, 120),
    ZIndex = 3
})

local Logo = Create("Frame", {
    Name = "Logo",
    Parent = Header,
    BackgroundColor3 = Theme.Primary,
    Position = UDim2.new(0.5, 0, 0, 35),
    Size = UDim2.new(0, 65, 0, 65),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 16), Parent = Logo})
Create("UIStroke", {
    Parent = Logo,
    Color = Theme.PrimaryLight,
    Thickness = 3,
    Transparency = 0.5
})

Create("UIGradient", {
    Parent = Logo,
    Color = ColorSequence.new(Theme.Primary, Theme.Secondary),
    Rotation = 45
})

local LogoIcon = Create("TextLabel", {
    Parent = Logo,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, 0, 1, 0),
    Text = "‚ö°",
    Font = Enum.Font.GothamBold,
    TextColor3 = Color3.fromRGB(255, 255, 255),
    TextSize = 32,
    ZIndex = 5
})

local Title = Create("TextLabel", {
    Name = "Title",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0, 115),
    Size = UDim2.new(1, -40, 0, 30),
    Text = KeyData.Name,
    Font = Enum.Font.GothamBold,
    TextColor3 = Theme.Text,
    TextSize = 26,
    TextXAlignment = Enum.TextXAlignment.Center,
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

Create("UIGradient", {
    Parent = Title,
    Color = ColorSequence.new(Theme.Text, Theme.PrimaryLight),
    Rotation = 90
})

local Subtitle = Create("TextLabel", {
    Name = "Subtitle",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0, 150),
    Size = UDim2.new(1, -40, 0, 20),
    Text = "Secure Key Verification System",
    Font = Enum.Font.Gotham,
    TextColor3 = Theme.TextDim,
    TextSize = 13,
    TextXAlignment = Enum.TextXAlignment.Center,
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

local InputFrame = Create("Frame", {
    Name = "InputFrame",
    Parent = Container,
    BackgroundColor3 = Theme.Surface,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, 0, 0, 195),
    Size = UDim2.new(0, 360, 0, 55),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

Create("UICorner", {CornerRadius = UDim.new(0, 12), Parent = InputFrame})
Create("UIStroke", {
    Name = "InputStroke",
    Parent = InputFrame,
    Color = Theme.Primary,
    Thickness = 2,
    Transparency = 0.85
})

local KeyInput = Create("TextBox", {
    Name = "KeyInput",
    Parent = InputFrame,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, -30, 1, 0),
    Position = UDim2.new(0, 15, 0, 0),
    Text = "",
    PlaceholderText = "Enter your verification key...",
    Font = Enum.Font.GothamMedium,
    TextSize = 14,
    TextColor3 = Theme.Text,
    PlaceholderColor3 = Theme.TextDim,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 4
})

local ButtonGrid = Create("Frame", {
    Name = "ButtonGrid",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0, 270),
    Size = UDim2.new(0, 360, 0, 110),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

local VerifyBtn = Create("TextButton", {
    Name = "VerifyButton",
    Parent = ButtonGrid,
    BackgroundColor3 = Theme.Primary,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 50),
    Text = "‚úì Verify Key",
    Font = Enum.Font.GothamBold,
    TextSize = 16,
    TextColor3 = Color3.fromRGB(255, 255, 255),
    AutoButtonColor = false,
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 12), Parent = VerifyBtn})
Create("UIGradient", {
    Parent = VerifyBtn,
    Color = ColorSequence.new(Theme.Primary, Theme.Secondary),
    Rotation = 45
})

local GetKeyBtn = Create("TextButton", {
    Name = "GetKeyButton",
    Parent = ButtonGrid,
    BackgroundColor3 = Theme.Surface,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 60),
    Size = UDim2.new(0.485, 0, 0, 45),
    Text = "üîë Get Key",
    Font = Enum.Font.GothamBold,
    TextSize = 14,
    TextColor3 = Theme.Text,
    AutoButtonColor = false,
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 10), Parent = GetKeyBtn})
Create("UIStroke", {
    Parent = GetKeyBtn,
    Color = Theme.Primary,
    Thickness = 2,
    Transparency = 0.7
})

local DiscordBtn = Create("TextButton", {
    Name = "DiscordButton",
    Parent = ButtonGrid,
    BackgroundColor3 = Theme.Discord,
    BorderSizePixel = 0,
    Position = UDim2.new(0.515, 0, 0, 60),
    Size = UDim2.new(0.485, 0, 0, 45),
    Text = "üí¨ Discord",
    Font = Enum.Font.GothamBold,
    TextSize = 14,
    TextColor3 = Color3.fromRGB(255, 255, 255),
    AutoButtonColor = false,
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 10), Parent = DiscordBtn})

local Footer = Create("Frame", {
    Name = "Footer",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 1, -60),
    Size = UDim2.new(1, 0, 0, 60),
    ZIndex = 3
})

local StatusText = Create("TextLabel", {
    Name = "StatusText",
    Parent = Footer,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0.5, 0),
    Size = UDim2.new(1, -40, 0, 20),
    Text = "",
    Font = Enum.Font.GothamMedium,
    TextColor3 = Theme.TextDim,
    TextSize = 12,
    TextXAlignment = Enum.TextXAlignment.Center,
    AnchorPoint = Vector2.new(0.5, 0.5),
    ZIndex = 4
})

local Notification = Create("Frame", {
    Name = "Notification",
    Parent = Gui,
    BackgroundColor3 = Theme.Surface,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, 0, 0, -100),
    Size = UDim2.new(0, 350, 0, 60),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 10,
    ClipsDescendants = true
})

Create("UICorner", {CornerRadius = UDim.new(0, 12), Parent = Notification})
Create("UIStroke", {
    Name = "NotifStroke",
    Parent = Notification,
    Color = Theme.Primary,
    Thickness = 2
})

local NotifText = Create("TextLabel", {
    Parent = Notification,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, -30, 1, 0),
    Position = UDim2.new(0, 15, 0, 0),
    Text = "",
    Font = Enum.Font.GothamBold,
    TextColor3 = Theme.Text,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 11
})

local notificationActive = false

local function ShowNotification(text, color)
    if notificationActive then
        Notification.Position = UDim2.new(0.5, 0, 0, -100)
        task.wait(0.1)
    end
    
    notificationActive = true
    NotifText.Text = text
    Notification.BackgroundColor3 = color
    Notification.NotifStroke.Color = color
    
    local slideIn = Tween(Notification, 0.6, {Position = UDim2.new(0.5, 0, 0, 30)}, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    
    task.delay(3, function()
        if notificationActive then
            Tween(Notification, 0.5, {Position = UDim2.new(0.5, 0, 0, -100)}, Enum.EasingStyle.Back, Enum.EasingDirection.In)
            task.wait(0.5)
            notificationActive = false
        end
    end)
end

local function AddHover(btn, hoverColor)
    local original = btn.BackgroundColor3
    btn.MouseEnter:Connect(function()
        Tween(btn, 0.3, {BackgroundColor3 = hoverColor or Theme.PrimaryHover}, Enum.EasingStyle.Sine)
        Tween(btn, 0.3, {Size = btn.Size + UDim2.new(0, 0, 0, 3)}, Enum.EasingStyle.Sine)
    end)
    btn.MouseLeave:Connect(function()
        Tween(btn, 0.3, {BackgroundColor3 = original}, Enum.EasingStyle.Sine)
        Tween(btn, 0.3, {Size = btn.Size - UDim2.new(0, 0, 0, 3)}, Enum.EasingStyle.Sine)
    end)
end

AddHover(VerifyBtn, Theme.PrimaryHover)
AddHover(GetKeyBtn, Theme.SurfaceLight)
AddHover(DiscordBtn, Color3.fromRGB(100, 113, 255))

KeyInput.Focused:Connect(function()
    Tween(InputFrame.InputStroke, 0.3, {Transparency = 0.3, Thickness = 2.5}, Enum.EasingStyle.Sine)
    Tween(InputFrame, 0.3, {BackgroundColor3 = Theme.SurfaceLight}, Enum.EasingStyle.Sine)
end)

KeyInput.FocusLost:Connect(function()
    Tween(InputFrame.InputStroke, 0.3, {Transparency = 0.85, Thickness = 2}, Enum.EasingStyle.Sine)
    Tween(InputFrame, 0.3, {BackgroundColor3 = Theme.Surface}, Enum.EasingStyle.Sine)
end)

local function GetKeyLink()
    local success, JunkieKeySystem = pcall(function()
        return loadstring(game:HttpGet("https://junkie-development.de/sdk/JunkieKeySystem.lua"))()
    end)
    
    if not success then
        ShowNotification("‚úó Failed to load key system", Theme.Error)
        return
    end
    
    local link = JunkieKeySystem.getLink(Config.api, Config.provider, Config.service)
    if link then
        if setclipboard then
            setclipboard(link)
            ShowNotification("‚úì Key link copied to clipboard!", Theme.Success)
        else
            ShowNotification("Link: " .. link, Theme.Success)
        end
    else
        ShowNotification("‚úó Failed to generate key link", Theme.Error)
    end
end

local function ValidateKey()
    local key = KeyInput.Text:gsub("%s+", "")
    if key == "" then
        ShowNotification("‚úó Please enter a valid key", Theme.Error)
        return
    end
    
    StatusText.Text = "‚è≥ Validating key..."
    StatusText.TextColor3 = Theme.Primary
    
    local success, JunkieKeySystem = pcall(function()
        return loadstring(game:HttpGet("https://junkie-development.de/sdk/JunkieKeySystem.lua"))()
    end)
    
    if not success then
        ShowNotification("‚úó Connection error", Theme.Error)
        StatusText.Text = ""
        return
    end
    
    local isValid = JunkieKeySystem.verifyKey(Config.api, key, Config.service)
    
    if isValid then
        SaveKey(key)
        ShowNotification("‚úì Key validated successfully!", Theme.Success)
        StatusText.Text = "‚úì Access granted"
        StatusText.TextColor3 = Theme.Success
        
        Tween(Logo, 0.4, {Rotation = 360}, Enum.EasingStyle.Back)
        task.wait(0.2)
        
        Tween(Container, 0.7, {Size = UDim2.new(0, 420, 0, 0), Position = UDim2.new(0.5, 0, 0.5, 0)}, Enum.EasingStyle.Back, Enum.EasingDirection.In)
        Tween(Overlay, 0.7, {BackgroundTransparency = 1}, Enum.EasingStyle.Sine)
        
        task.wait(0.8)
        Gui:Destroy()
        main()
    else
        DeleteKey()
        ShowNotification("‚úó Invalid key. Please try again", Theme.Error)
        StatusText.Text = "‚úó Validation failed"
        StatusText.TextColor3 = Theme.Error
        
        for i = 1, 4 do
            Tween(Container, 0.06, {Position = UDim2.new(0.5, i % 2 == 0 and -20 or 20, 0.5, 0)}, Enum.EasingStyle.Elastic)
            task.wait(0.06)
        end
        Tween(Container, 0.2, {Position = UDim2.new(0.5, 0, 0.5, 0)}, Enum.EasingStyle.Elastic)
        
        task.delay(2.5, function()
            Tween(StatusText, 0.3, {TextTransparency = 1}, Enum.EasingStyle.Sine)
            task.wait(0.3)
            StatusText.Text = ""
            StatusText.TextTransparency = 0
        end)
    end
end

VerifyBtn.MouseButton1Click:Connect(ValidateKey)
GetKeyBtn.MouseButton1Click:Connect(GetKeyLink)

DiscordBtn.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard(KeyData.DiscordInvite)
        ShowNotification("‚úì Discord invite copied!", Theme.Discord)
    else
        ShowNotification(KeyData.DiscordInvite, Theme.Discord)
    end
end)

KeyInput.FocusLost:Connect(function(enter)
    if enter then ValidateKey() end
end)

local dragging, dragInput, dragStart, startPos

Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Container.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        Container.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

Container.Size = UDim2.new(0, 0, 0, 0)
Overlay.BackgroundTransparency = 1

Tween(Overlay, 0.6, {BackgroundTransparency = 0.4}, Enum.EasingStyle.Sine)
Tween(Container, 0.8, {Size = UDim2.new(0, 420, 0, 500)}, Enum.EasingStyle.Back, Enum.EasingDirection.Out)

task.spawn(function()
    while Container.Parent do
        Tween(Logo, 1.5, {Rotation = 5}, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
        task.wait(1.5)
        Tween(Logo, 1.5, {Rotation = -5}, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
        task.wait(1.5)
    end
end)

local savedKey = LoadKey()
if savedKey then
    KeyInput.Text = savedKey
    StatusText.Text = "Using saved key..."
    StatusText.TextColor3 = Theme.Primary
    task.wait(0.5)
    ValidateKey()
end
