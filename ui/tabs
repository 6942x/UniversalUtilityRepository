local TweenService = game:GetService("TweenService")

local function CreateSideNav(parent)
    local side = Instance.new("Frame", parent)
    side.Name = "SideNav"
    side.Size = UDim2.new(0, 180, 1, -57)
    side.Position = UDim2.new(0, 2.5, 0, 50)
    side.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    side.BorderSizePixel = 0

    local corner = Instance.new("UICorner", side)
    corner.CornerRadius = UDim.new(0, 12)

    return side
end

local function CreateTabButton(parent, name, icon, position)
    local btn = Instance.new("TextButton", parent)
    btn.Name = name .. "Tab"
    btn.Size = UDim2.new(1, -10, 0, 55)
    btn.Position = position
    btn.BackgroundColor3 = Color3.fromRGB(35, 35, 42)
    btn.BorderSizePixel = 0
    btn.Text = ""
    btn.AutoButtonColor = false

    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0, 8)

    local iconLabel = Instance.new("TextLabel", btn)
    iconLabel.Size = UDim2.new(0, 30, 1, 0)
    iconLabel.Position = UDim2.new(0, 10, 0, 0)
    iconLabel.BackgroundTransparency = 1
    iconLabel.Text = icon
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.TextSize = 24
    iconLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    iconLabel.TextXAlignment = Enum.TextXAlignment.Left

    local nameLabel = Instance.new("TextLabel", btn)
    nameLabel.Size = UDim2.new(1, -50, 1, 0)
    nameLabel.Position = UDim2.new(0, 45, 0, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = name
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextSize = 13
    nameLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left

    btn.MouseEnter:Connect(function()
        if btn.BackgroundColor3 ~= Color3.fromRGB(100, 150, 255) then
            TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(45, 45, 52)}):Play()
            TweenService:Create(iconLabel, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(200, 200, 200)}):Play()
            TweenService:Create(nameLabel, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(200, 200, 200)}):Play()
        end
    end)

    btn.MouseLeave:Connect(function()
        if btn.BackgroundColor3 ~= Color3.fromRGB(100, 150, 255) then
            TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(35, 35, 42)}):Play()
            TweenService:Create(iconLabel, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(180, 180, 180)}):Play()
            TweenService:Create(nameLabel, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(180, 180, 180)}):Play()
        end
    end)

    return btn, iconLabel, nameLabel
end

local function CreateContentFrame(parent)
    local content = Instance.new("Frame", parent)
    content.Name = "ContentFrame"
    content.Size = UDim2.new(1, -180, 1, -40)
    content.Position = UDim2.new(0, 180, 0, 45)
    content.BackgroundTransparency = 1
    content.BorderSizePixel = 0
    content.ClipsDescendants = true

    return content
end

local function CreateTabContent(parent, name)
    local scroll = Instance.new("ScrollingFrame", parent)
    scroll.Name = name .. "Content"
    scroll.Size = UDim2.new(1, -10, 1, -10)
    scroll.Position = UDim2.new(0, 5, 0, 5)
    scroll.BackgroundTransparency = 1
    scroll.BorderSizePixel = 0
    scroll.ScrollBarThickness = 4
    scroll.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    scroll.ScrollBarImageTransparency = 0.5
    scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    scroll.Visible = false

    local layout = Instance.new("UIListLayout", scroll)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Padding = UDim.new(0, 10)

    return scroll
end

local function SwitchTab(tabs, contents, targetName, config)
    config.CurrentTab = targetName

    for name, content in pairs(contents) do
        content.Visible = (name == targetName)
    end

    for name, data in pairs(tabs) do
        local isActive = (name == targetName)
        TweenService:Create(data.button, TweenInfo.new(0.2), {
            BackgroundColor3 = isActive and Color3.fromRGB(100, 150, 255) or Color3.fromRGB(35, 35, 42)
        }):Play()
        TweenService:Create(data.icon, TweenInfo.new(0.2), {
            TextColor3 = isActive and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(180, 180, 180)
        }):Play()
        TweenService:Create(data.label, TweenInfo.new(0.2), {
            TextColor3 = isActive and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(180, 180, 180)
        }):Play()
    end
end

return {
    CreateSideNav = CreateSideNav,
    CreateTabButton = CreateTabButton,
    CreateContentFrame = CreateContentFrame,
    CreateTabContent = CreateTabContent,
    SwitchTab = SwitchTab
}
