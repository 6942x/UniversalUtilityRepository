local ScreenGui = _G.UniversalUtility.ScreenGui
local TweenService = _G.UniversalUtility.Services.TweenService
local TweenPresets = _G.UniversalUtility.TweenPresets
local TabButtons = _G.UniversalUtility.TabButtons
local TabContents = _G.UniversalUtility.TabContents
local ButtonStates = _G.UniversalUtility.ButtonStates
local Config = _G.UniversalUtility.Config

_G.UniversalUtility.UI = _G.UniversalUtility.UI or {}

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 0, 0, 0)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.ClipsDescendants = true
MainFrame.Visible = false

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 16)

_G.UniversalUtility.UI.MainFrame = MainFrame

local TopBar = Instance.new("Frame", MainFrame)
TopBar.Name = "TopBar"
TopBar.Size = UDim2.new(1, 0, 0, 40)
TopBar.Position = UDim2.new(0, 0, 0, 5)
TopBar.BackgroundColor3 = Color3.fromRGB(35, 35, 42)
TopBar.BackgroundTransparency = 0
TopBar.BorderSizePixel = 0

local TopBarCorner = Instance.new("UICorner", TopBar)
TopBarCorner.CornerRadius = UDim.new(0, 16)

local Title = Instance.new("TextLabel", TopBar)
Title.Size = UDim2.new(1, -80, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "‚ö° Universal Utility"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 24
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left

local CloseButton = Instance.new("ImageButton", TopBar)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -40, 0.48, 0)
CloseButton.AnchorPoint = Vector2.new(0, 0.5)
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
CloseButton.BorderSizePixel = 0
CloseButton.Image = "rbxassetid://3926305904"
CloseButton.ImageRectOffset = Vector2.new(284, 4)
CloseButton.ImageRectSize = Vector2.new(24, 24)
CloseButton.ImageColor3 = Color3.fromRGB(255, 255, 255)

local CloseButtonCorner = Instance.new("UICorner", CloseButton)
CloseButtonCorner.CornerRadius = UDim.new(0, 8)

_G.UniversalUtility.UI.CloseButton = CloseButton

local SideNav = Instance.new("Frame", MainFrame)
SideNav.Name = "SideNav"
SideNav.Size = UDim2.new(0, 180, 1, -57)
SideNav.Position = UDim2.new(0, 2.5, 0, 50)
SideNav.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
SideNav.BorderSizePixel = 0

local SideNavCorner = Instance.new("UICorner", SideNav)
SideNavCorner.CornerRadius = UDim.new(0, 12)

_G.UniversalUtility.UI.SideNav = SideNav

local ContentFrame = Instance.new("Frame", MainFrame)
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, -180, 1, -40)
ContentFrame.Position = UDim2.new(0, 180, 0, 45)
ContentFrame.BackgroundTransparency = 1
ContentFrame.BorderSizePixel = 0
ContentFrame.ClipsDescendants = true

_G.UniversalUtility.UI.ContentFrame = ContentFrame

function _G.UniversalUtility.CreateTabButton(name, icon, position)
    local btn = Instance.new("TextButton", SideNav)
    btn.Name = name .. "Tab"
    btn.Size = UDim2.new(1, -10, 0, 55)
    btn.Position = position
    btn.BackgroundColor3 = Color3.fromRGB(35, 35, 42)
    btn.BorderSizePixel = 0
    btn.Text = ""
    btn.AutoButtonColor = false
    
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0, 8)
    
    local iconLabel = Instance.new("TextLabel", btn)
    iconLabel.Size = UDim2.new(0, 30, 1, 0)
    iconLabel.Position = UDim2.new(0, 10, 0, 0)
    iconLabel.BackgroundTransparency = 1
    iconLabel.Text = icon
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.TextSize = 24
    iconLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    iconLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    local nameLabel = Instance.new("TextLabel", btn)
    nameLabel.Size = UDim2.new(1, -50, 1, 0)
    nameLabel.Position = UDim2.new(0, 45, 0, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = name
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextSize = 13
    nameLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    TabButtons[name] = {Button = btn, Icon = iconLabel, Label = nameLabel}
    
    btn.MouseEnter:Connect(function()
        if Config.CurrentTab ~= name then
            TweenService:Create(btn, TweenPresets.Fast, {
                BackgroundColor3 = Color3.fromRGB(45, 45, 52)
            }):Play()
            TweenService:Create(iconLabel, TweenPresets.Fast, {
                TextColor3 = Color3.fromRGB(200, 200, 200)
            }):Play()
            TweenService:Create(nameLabel, TweenPresets.Fast, {
                TextColor3 = Color3.fromRGB(200, 200, 200)
            }):Play()
        end
    end)
    
    btn.MouseLeave:Connect(function()
        if Config.CurrentTab ~= name then
            TweenService:Create(btn, TweenPresets.Fast, {
                BackgroundColor3 = Color3.fromRGB(35, 35, 42)
            }):Play()
            TweenService:Create(iconLabel, TweenPresets.Fast, {
                TextColor3 = Color3.fromRGB(180, 180, 180)
            }):Play()
            TweenService:Create(nameLabel, TweenPresets.Fast, {
                TextColor3 = Color3.fromRGB(180, 180, 180)
            }):Play()
        end
    end)
    
    return btn
end

function _G.UniversalUtility.CreateTabContent(name)
    local scroll = Instance.new("ScrollingFrame", ContentFrame)
    scroll.Name = name .. "Content"
    scroll.Size = UDim2.new(1, -10, 1, -10)
    scroll.Position = UDim2.new(0, 5, 0, 5)
    scroll.BackgroundTransparency = 1
    scroll.BorderSizePixel = 0
    scroll.ScrollBarThickness = 4
    scroll.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    scroll.ScrollBarImageTransparency = 0.5
    scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    scroll.Visible = false
    scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    
    local layout = Instance.new("UIListLayout", scroll)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Padding = UDim.new(0, 10)
    
    TabContents[name] = scroll
    return scroll
end

function _G.UniversalUtility.CreateButton(parent, size, text)
    local button = Instance.new("TextButton", parent)
    button.Size = size
    button.AnchorPoint = Vector2.new(0.5, 0)
    button.Position = UDim2.new(0.5, 0, 0, 0)
    button.BackgroundColor3 = Color3.fromRGB(45, 45, 52)
    button.Text = text
    button.Font = Enum.Font.GothamBold
    button.TextSize = 13
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.BorderSizePixel = 0

    local corner = Instance.new("UICorner", button)
    corner.CornerRadius = UDim.new(0, 8)

    local originalSize = size
    local isHovering = false
    
    ButtonStates[button] = {
        OriginalSize = originalSize,
        IsHovering = false
    }

    button.MouseEnter:Connect(function()
        isHovering = true
        ButtonStates[button].IsHovering = true
        TweenService:Create(button, TweenPresets.Fast, {
            Size = UDim2.new(originalSize.X.Scale, originalSize.X.Offset + 6, originalSize.Y.Scale, originalSize.Y.Offset + 4)
        }):Play()
    end)

    button.MouseLeave:Connect(function()
        isHovering = false
        ButtonStates[button].IsHovering = false
        local currentColor = button.BackgroundColor3
        TweenService:Create(button, TweenPresets.Fast, {
            Size = originalSize,
            BackgroundColor3 = currentColor
        }):Play()
    end)

    button.MouseButton1Down:Connect(function()
        if isHovering then
            TweenService:Create(button, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = UDim2.new(originalSize.X.Scale, originalSize.X.Offset - 4, originalSize.Y.Scale, originalSize.Y.Offset - 3)
            }):Play()
        end
    end)

    button.MouseButton1Up:Connect(function()
        if isHovering then
            TweenService:Create(button, TweenPresets.Fast, {
                Size = UDim2.new(originalSize.X.Scale, originalSize.X.Offset + 6, originalSize.Y.Scale, originalSize.Y.Offset + 4)
            }):Play()
        else
            TweenService:Create(button, TweenPresets.Fast, {
                Size = originalSize
            }):Play()
        end
    end)

    return button
end

function _G.UniversalUtility.CreateSlider(parent, size, minValue, maxValue, currentValue, labelText)
    local sliderFrame = Instance.new("Frame", parent)
    sliderFrame.Size = size
    sliderFrame.BackgroundTransparency = 1

    local valueLabel = Instance.new("TextLabel", sliderFrame)
    valueLabel.Size = UDim2.new(1, 0, 0, 18)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = labelText
    valueLabel.Font = Enum.Font.Gotham
    valueLabel.TextSize = 12
    valueLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    valueLabel.TextXAlignment = Enum.TextXAlignment.Left

    local slider = Instance.new("Frame", sliderFrame)
    slider.Size = UDim2.new(1, -60, 0, 6)
    slider.Position = UDim2.new(0, 0, 0, 22)
    slider.BackgroundColor3 = Color3.fromRGB(45, 45, 52)
    slider.BorderSizePixel = 0

    local sliderCorner = Instance.new("UICorner", slider)
    sliderCorner.CornerRadius = UDim.new(0, 3)

    local fill = Instance.new("Frame", slider)
    fill.Size = UDim2.new(0.5, 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
    fill.BorderSizePixel = 0

    local fillCorner = Instance.new("UICorner", fill)
    fillCorner.CornerRadius = UDim.new(0, 3)

    local button = Instance.new("TextButton", slider)
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""

    local valueBox = Instance.new("TextBox", sliderFrame)
    valueBox.Size = UDim2.new(0, 50, 0, 24)
    valueBox.Position = UDim2.new(1, -50, 0, 16)
    valueBox.BackgroundColor3 = Color3.fromRGB(45, 45, 52)
    valueBox.Text = tostring(currentValue)
    valueBox.Font = Enum.Font.Gotham
    valueBox.TextScaled = true
    valueBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    valueBox.ClearTextOnFocus = false

    local valueCorner = Instance.new("UICorner", valueBox)
    valueCorner.CornerRadius = UDim.new(0, 5)

    return sliderFrame, slider, fill, button, valueBox, valueLabel
end

local tabList = {
    {"Home", "üè†", UDim2.new(0, 5, 0, 5)},
    {"Anti-AFK", "üõ°Ô∏è", UDim2.new(0, 5, 0, 68)},
    {"KeySpam", "‚å®Ô∏è", UDim2.new(0, 5, 0, 131)},
    {"Performance Status", "üìä", UDim2.new(0, 5, 0, 194)},
    {"Auto Rejoin", "üîÑ", UDim2.new(0, 5, 0, 257)},
    {"Script Loader", "üíæ", UDim2.new(0, 5, 0, 320)},
    {"Settings", "‚öôÔ∏è", UDim2.new(0, 5, 0, 383)}
}

for _, tab in ipairs(tabList) do
    _G.UniversalUtility.CreateTabButton(tab[1], tab[2], tab[3])
end

for _, tab in ipairs(tabList) do
    _G.UniversalUtility.CreateTabContent(tab[1])
end

local ReopenButton = Instance.new("ImageButton", ScreenGui)
ReopenButton.Name = "ReopenButton"
ReopenButton.Size = UDim2.new(0, 0, 0, 0)
ReopenButton.Position = UDim2.new(0.5, 0, 0, 30)
ReopenButton.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
ReopenButton.BorderSizePixel = 0
ReopenButton.Visible = false
ReopenButton.ZIndex = 10

local ReopenCorner = Instance.new("UICorner", ReopenButton)
ReopenCorner.CornerRadius = UDim.new(1, 0)

local ReopenIcon = Instance.new("TextLabel", ReopenButton)
ReopenIcon.Size = UDim2.new(1, 0, 1, 0)
ReopenIcon.BackgroundTransparency = 1
ReopenIcon.Text = "‚ö°"
ReopenIcon.Font = Enum.Font.GothamBold
ReopenIcon.TextSize = 24
ReopenIcon.TextColor3 = Color3.fromRGB(255, 255, 255)

_G.UniversalUtility.UI.ReopenButton = ReopenButton

print("‚úì UI/Framework loaded")
