Config = {
    api = "2bc06ccb-13d7-4450-9ace-d9fe981de37a", 
    service = "NovaService",
    provider = "NovaProvider"
}

local function main()
    print("Key validated! Loading Nova Hub...")
    local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

if game.PlaceId == 123638582555543 then
    local Window = Rayfield:CreateWindow({
        Name = "ðŸ–¥ï¸ Nova Hub ðŸ–¥ï¸",
        Icon = 0,
        LoadingTitle = "Loading Nova Hub, please wait",
        LoadingSubtitle = "by Nova",
        ShowText = "NovaHub",
        Theme = {
            TextColor = Color3.fromRGB(240, 240, 240),
            Background = Color3.fromRGB(25, 20, 30),
            Topbar = Color3.fromRGB(35, 25, 45),
            Shadow = Color3.fromRGB(20, 15, 25),
            NotificationBackground = Color3.fromRGB(25, 20, 30),
            NotificationActionsBackground = Color3.fromRGB(230, 230, 230),
            TabBackground = Color3.fromRGB(70, 50, 90),
            TabStroke = Color3.fromRGB(85, 65, 110),
            TabBackgroundSelected = Color3.fromRGB(210, 180, 255),
            TabTextColor = Color3.fromRGB(240, 240, 240),
            SelectedTabTextColor = Color3.fromRGB(45, 30, 60),
            ElementBackground = Color3.fromRGB(40, 30, 55),
            ElementBackgroundHover = Color3.fromRGB(50, 40, 70),
            SecondaryElementBackground = Color3.fromRGB(30, 25, 45),
            ElementStroke = Color3.fromRGB(60, 45, 80),
            SecondaryElementStroke = Color3.fromRGB(45, 35, 65),
            SliderBackground = Color3.fromRGB(140, 80, 255),
            SliderProgress = Color3.fromRGB(160, 100, 255),
            SliderStroke = Color3.fromRGB(180, 120, 255),
            ToggleBackground = Color3.fromRGB(35, 30, 50),
            ToggleEnabled = Color3.fromRGB(150, 90, 255),
            ToggleDisabled = Color3.fromRGB(100, 100, 100),
            ToggleEnabledStroke = Color3.fromRGB(170, 110, 255),
            ToggleDisabledStroke = Color3.fromRGB(125, 125, 125),
            ToggleEnabledOuterStroke = Color3.fromRGB(100, 80, 130),
            ToggleDisabledOuterStroke = Color3.fromRGB(65, 65, 65),
            DropdownSelected = Color3.fromRGB(50, 40, 70),
            DropdownUnselected = Color3.fromRGB(35, 30, 55),
            InputBackground = Color3.fromRGB(35, 30, 50),
            InputStroke = Color3.fromRGB(70, 50, 100),
            PlaceholderColor = Color3.fromRGB(190, 170, 210)
        },
        ToggleUIKeybind = "K",
        DisableRayfieldPrompts = false,
        DisableBuildWarnings = false,
        ConfigurationSaving = {
            Enabled = true,
            FolderName = "NovaHub",
            FileName = "Settings"
        },
        Discord = {
            Enabled = true,
            Invite = "GhhAMF7B",
            RememberJoins = false
        },
        KeySystem = false,
        KeySettings = {
            Title = "Nova Hub - Key",
            Subtitle = " Discord: discord.gg/GhhAMF7B",
            Note = "Join the discord server for more information",
            FileName = "NovaKey",
            SaveKey = true,
            GrabKeyFromSite = false,
            Key = {""}
        }
    })

    local MainTab = Window:CreateTab("Home")
    local AutoFarmTab = Window:CreateTab("Auto Farm")
    local GamemodesTab = Window:CreateTab("Gamemodes")
    local AutoStarTab = Window:CreateTab("Auto Star")
    local PlayerTab = Window:CreateTab("Player")
    local MiscTab = Window:CreateTab("Misc")

    local function CreateHomeTab()
        MainTab:CreateSection("Script Information")
        
        Rayfield:Notify({
            Title = "Script Loaded Successfully",
            Content = "Nova Hub is now ready to use",
            Duration = 6.5,
        })

        MainTab:CreateLabel("Script Name: Nova Hub")
        MainTab:CreateLabel("Developer: Nova")
        MainTab:CreateLabel("Version: 2.1")
        MainTab:CreateLabel("Description: Advanced farming utility for efficient gameplay")
    end

    local function CreateAutoFarmTab()
        AutoFarmTab:CreateSection("Auto Farm Settings")
        
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LocalPlayer = Players.LocalPlayer

        local SelectedWorld = "Leaf Village"
        local AutoFarmEnabled = false
        local AutoFarmConnection
        
        if not _G.TeleportData then
            _G.TeleportData = {
                enemyNames = {"Zabuze", "Sasore", "Itache", "Paen", "Madare"}
            }
        end

        local CustomTargetsLabel = AutoFarmTab:CreateLabel("Custom Targets: " .. table.concat(_G.TeleportData.enemyNames, ", "))
        local ActiveEnemiesLabel = AutoFarmTab:CreateLabel("Active Enemies: 0")
        local FarmStatusLabel = AutoFarmTab:CreateLabel("Farm Status: Stopped")

        local MapEnemies = {
            ["Leaf Village"] = {"Zabuze", "Sasore", "Itache", "Paen", "Madare"},
            ["Dragon Town"] = {"Nappe", "Raditis", "Android", "Frieze", "Boo"},
            ["Slayer Village"] = {"Rue", "Dake", "Akaze", "Kokoshibe", "Muzen"}
        }

        local function getEnemyCounts()
            local enemyCounts = {}
            local targetEnemies = workspace.Client.Enemies
            
            for _, enemy in pairs(targetEnemies:GetChildren()) do
                if enemy:IsA("Model") then
                    local enemyName = enemy.Name
                    enemyCounts[enemyName] = (enemyCounts[enemyName] or 0) + 1
                end
            end
            
            return enemyCounts
        end

        local function updateEnemyDisplay()
            local enemyCounts = getEnemyCounts()
            local displayText = ""
            local totalEnemies = 0
            
            for enemyName, count in pairs(enemyCounts) do
                if displayText ~= "" then
                    displayText = displayText .. ", "
                end
                displayText = displayText .. enemyName .. " (x" .. count .. ")"
                totalEnemies = totalEnemies + count
            end
            
            if displayText == "" then
                displayText = "None"
            end
            
            ActiveEnemiesLabel:Set("Active Enemies: " .. totalEnemies .. " | " .. displayText)
            
            return enemyCounts
        end

        local function updateCustomTargetsDisplay()
            CustomTargetsLabel:Set("Custom Targets: " .. table.concat(_G.TeleportData.enemyNames, ", "))
        end

        local function addEnemy(enemyName)
            if enemyName ~= "" then
                table.insert(_G.TeleportData.enemyNames, enemyName)
                updateCustomTargetsDisplay()
            end
        end

        local function removeEnemy(enemyName)
            for i, name in ipairs(_G.TeleportData.enemyNames) do
                if name == enemyName then
                    table.remove(_G.TeleportData.enemyNames, i)
                    updateCustomTargetsDisplay()
                    return
                end
            end
        end

        local function removeLastEnemy()
            if #_G.TeleportData.enemyNames > 0 then
                table.remove(_G.TeleportData.enemyNames)
                updateCustomTargetsDisplay()
            end
        end

        local function clearAllEnemies()
            _G.TeleportData.enemyNames = {}
            updateCustomTargetsDisplay()
        end

        local function teleportToMap(mapName)
            local args = {
                "General",
                "Teleport",
                "Teleport",
                mapName
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(args))
        end

        local function teleportToWorldRoot(worldName)
            local rootPart = game.Workspace.Server.Stars[worldName].Model.Root
            if rootPart then
                local character = game.Players.LocalPlayer.Character
                if character and character:FindFirstChild("HumanoidRootPart") then
                    character.HumanoidRootPart.CFrame = rootPart.CFrame
                end
            end
        end

        local function attackNPC(npcName)
            local targetEnemies = workspace.Client.Enemies
            local enemy = targetEnemies:FindFirstChild(npcName)
            if enemy and enemy:FindFirstChild("HumanoidRootPart") then
                local attackArgs = {
                    "Combat",
                    "Attack",
                    npcName
                }
                game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(attackArgs))
            end
        end

        local function teleportToEnemy(enemyName)
            local targetEnemies = workspace.Client.Enemies
            local enemy = targetEnemies:FindFirstChild(enemyName)
            local character = LocalPlayer.Character
            if enemy and enemy:FindFirstChild("HumanoidRootPart") and character and character:FindFirstChild("HumanoidRootPart") then
                character.HumanoidRootPart.CFrame = enemy.HumanoidRootPart.CFrame
                attackNPC(enemyName)
            end
        end

        local function startAutoFarm()
            if AutoFarmConnection then
                AutoFarmConnection:Disconnect()
            end
            
            AutoFarmConnection = RunService.Heartbeat:Connect(function()
                if not AutoFarmEnabled then return end
                
                for _, enemyName in pairs(_G.TeleportData.enemyNames) do
                    if not AutoFarmEnabled then break end
                    teleportToEnemy(enemyName)
                    task.wait(0.1)
                end
            end)
        end

        local function stopAutoFarm()
            if AutoFarmConnection then
                AutoFarmConnection:Disconnect()
                AutoFarmConnection = nil
            end
        end

        local WorldSlider = AutoFarmTab:CreateSlider({
            Name = "Select World",
            Range = {1, 3},
            Increment = 1,
            Suffix = "World",
            CurrentValue = 1,
            Flag = "WorldSelectorFarm",
            Callback = function(Value)
                local worlds = {"Leaf Village", "Dragon Town", "Slayer Village"}
                SelectedWorld = worlds[Value]
                teleportToMap(SelectedWorld)
                task.wait(2)
                teleportToWorldRoot(SelectedWorld)
                
                if MapEnemies[SelectedWorld] then
                    _G.TeleportData.enemyNames = MapEnemies[SelectedWorld]
                    updateCustomTargetsDisplay()
                end
            end,
        })

        AutoFarmTab:CreateToggle({
            Name = "Auto Farm Enemies",
            CurrentValue = false,
            Flag = "AutoFarmToggle",
            Callback = function(Value)
                AutoFarmEnabled = Value
                
                if Value then
                    FarmStatusLabel:Set("Farm Status: Running")
                    startAutoFarm()
                else
                    FarmStatusLabel:Set("Farm Status: Stopped")
                    stopAutoFarm()
                end
            end,
        })

        AutoFarmTab:CreateSection("Enemy Management")

        local EnemyInput = AutoFarmTab:CreateInput({
            Name = "Add Enemy",
            PlaceholderText = "Enter NPC Name",
            RemoveTextAfterFocusLost = false,
            Callback = function(Text)
                addEnemy(Text)
            end,
        })

        AutoFarmTab:CreateButton({
            Name = "Remove Last Enemy",
            Callback = function()
                removeLastEnemy()
            end,
        })

        AutoFarmTab:CreateButton({
            Name = "Clear All Enemies",
            Callback = function()
                clearAllEnemies()
            end,
        })

        AutoFarmTab:CreateButton({
            Name = "Refresh Enemy List",
            Callback = function()
                updateEnemyDisplay()
            end,
        })

        RunService.Heartbeat:Connect(function()
            updateEnemyDisplay()
        end)

        updateEnemyDisplay()
        updateCustomTargetsDisplay()
    end

    local function CreateGamemodesTab()
        local ConfigSection = GamemodesTab:CreateSection("Configuration")
        
        local SelectedWorld = "Leaf Village"
        local TowerTargetWave = 50
        local TrialTargetWave = 30
        local GamemodePriority = "Tower"
        
        local WorldSlider = GamemodesTab:CreateSlider({
            Name = "Select World",
            Range = {1, 3},
            Increment = 1,
            Suffix = "World",
            CurrentValue = 1,
            Flag = "WorldSelector",
            Callback = function(Value)
                local worlds = {"Leaf Village", "Dragon Town", "Slayer Village"}
                SelectedWorld = worlds[Value]
            end,
        })
        
        local TowerWaveSlider = GamemodesTab:CreateSlider({
            Name = "Tower Target Wave",
            Range = {1, 100},
            Increment = 1,
            Suffix = "Wave",
            CurrentValue = 50,
            Flag = "TowerWave",
            Callback = function(Value)
                TowerTargetWave = Value
            end,
        })
        
        local TrialWaveSlider = GamemodesTab:CreateSlider({
            Name = "Trial Target Wave",
            Range = {1, 50},
            Increment = 1,
            Suffix = "Wave",
            CurrentValue = 30,
            Flag = "TrialWave",
            Callback = function(Value)
                TrialTargetWave = Value
            end,
        })
        
        local PriorityDropdown = GamemodesTab:CreateDropdown({
            Name = "Gamemode Priority",
            Options = {"Tower", "Trial"},
            CurrentOption = "Tower",
            Flag = "GamemodePriority",
            Callback = function(Option)
                GamemodePriority = Option
            end,
        })
        
        local TowerSection = GamemodesTab:CreateSection("Auto Tower")
        
        local AutoTowerEnabled = false
        local TowerStatusLabel = GamemodesTab:CreateLabel("Tower Status: Stopped")
        
        local function teleportToLobby()
            local args = {
                "General",
                "Teleport",
                "Teleport",
                "Lobby"
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(args))
        end
        
        local function teleportToMap(mapName)
            local args = {
                "General",
                "Teleport",
                "Teleport",
                mapName
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(args))
        end
        
        local function teleportToWorldRoot(worldName)
            local rootPart = game.Workspace.Server.Stars[worldName].Model.Root
            if rootPart then
                local character = game.Players.LocalPlayer.Character
                if character and character:FindFirstChild("HumanoidRootPart") then
                    character.HumanoidRootPart.CFrame = rootPart.CFrame
                end
            end
        end
        
        local function startTower()
            local args = {
                "Gamemodes",
                "Tower",
                "Start"
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(args))
        end
        
        local function leaveTower()
            local args = {
                "Gamemodes",
                "Tower",
                "Leave"
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(args))
        end
        
        local function joinTrial()
            local args = {
                "Gamemodes",
                "Trial",
                "Join"
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(args))
        end
        
        local function leaveTrial()
            local args = {
                "Gamemodes",
                "Trial",
                "Leave"
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(args))
        end
        
        local function getCurrentWave(gamemode)
            local gamemodeFolder = game:GetService("ReplicatedStorage").Gamemodes:FindFirstChild(gamemode)
            if gamemodeFolder then
                local waveValue = gamemodeFolder:FindFirstChild("Wave")
                if waveValue then
                    return waveValue.Value
                end
            end
            return 0
        end

        local function teleportToEnemies()
            local targetEnemies = workspace.Client.Enemies
            for _, enemy in pairs(targetEnemies:GetChildren()) do
                if enemy:IsA("Model") and enemy:FindFirstChild("HumanoidRootPart") then
                    local character = game.Players.LocalPlayer.Character
                    if character and character:FindFirstChild("HumanoidRootPart") then
                        character.HumanoidRootPart.CFrame = enemy.HumanoidRootPart.CFrame
                        break
                    end
                end
            end
        end

        local function isInTrial()
            local currentWave = getCurrentWave("Trial")
            return currentWave > 0
        end

        local function isInTower()
            local currentWave = getCurrentWave("Tower")
            return currentWave > 0
        end
        
        local function isTrialTime()
            local currentTime = os.date("*t")
            local minute = currentTime.min
            return minute >= 30 or minute == 0
        end

        local function safeTeleportToWorld()
            local success = pcall(function()
                teleportToMap(SelectedWorld)
                task.wait(2)
                teleportToWorldRoot(SelectedWorld)
                task.wait(2)
            end)
            return success
        end

        local function safeTeleportToLobby()
            local success = pcall(function()
                teleportToLobby()
                task.wait(2)
            end)
            return success
        end
        
        local AutoTowerToggle = GamemodesTab:CreateToggle({
            Name = "Auto Tower",
            CurrentValue = false,
            Flag = "AutoTowerToggle",
            Callback = function(Value)
                AutoTowerEnabled = Value
                TowerStatusLabel:Set("Tower Status: " .. (Value and "Running" or "Stopped"))
                
                if Value then
                    if _G.AutoTowerExecuting then
                        _G.AutoTowerExecuting = false
                        task.wait(1)
                    end
                    
                    _G.AutoTowerExecuting = true
                    
                    coroutine.wrap(function()
                        while _G.AutoTowerExecuting and AutoTowerEnabled do
                            if GamemodePriority == "Trial" and isTrialTime() then
                                if isInTower() then
                                    leaveTower()
                                    task.wait(3)
                                end
                                if not isInTrial() then
                                    safeTeleportToLobby()
                                    task.wait(2)
                                    joinTrial()
                                    task.wait(5)
                                end
                                task.wait(5)
                            else
                                if isInTrial() then
                                    leaveTrial()
                                    task.wait(3)
                                end
                                
                                if not isInTower() then
                                    safeTeleportToLobby()
                                    task.wait(2)
                                    startTower()
                                    task.wait(3)
                                end
                                
                                local towerCompleted = false
                                local startTime = tick()
                                local lastTeleportTime = 0
                                
                                while _G.AutoTowerExecuting and AutoTowerEnabled and not towerCompleted do
                                    local currentWave = getCurrentWave("Tower")
                                    
                                    if currentWave >= TowerTargetWave then
                                        towerCompleted = true
                                    end
                                    
                                    if tick() - startTime > 300 then
                                        towerCompleted = true
                                    end

                                    if tick() - lastTeleportTime >= 2.5 then
                                        teleportToEnemies()
                                        lastTeleportTime = tick()
                                    end
                                    
                                    task.wait(0.5)
                                end
                                
                                if _G.AutoTowerExecuting and AutoTowerEnabled then
                                    leaveTower()
                                    task.wait(2)
                                    safeTeleportToWorld()
                                    task.wait(5)
                                end
                            end
                            task.wait(1)
                        end
                    end)()
                else
                    _G.AutoTowerExecuting = false
                end
            end,
        })
        
        GamemodesTab:CreateSection("Auto Trial")
        
        local AutoTrialEnabled = false
        local TrialStatusLabel = GamemodesTab:CreateLabel("Trial Status: Stopped")
        
        local AutoTrialToggle = GamemodesTab:CreateToggle({
            Name = "Auto Trial",
            CurrentValue = false,
            Flag = "AutoTrialToggle",
            Callback = function(Value)
                AutoTrialEnabled = Value
                TrialStatusLabel:Set("Trial Status: " .. (Value and "Running" or "Stopped"))
                
                if Value then
                    if _G.AutoTrialExecuting then
                        _G.AutoTrialExecuting = false
                        task.wait(1)
                    end
                    
                    _G.AutoTrialExecuting = true
                    
                    coroutine.wrap(function()
                        while _G.AutoTrialExecuting and AutoTrialEnabled do
                            if GamemodePriority == "Tower" and isInTower() and not isTrialTime() then
                                task.wait(10)
                                continue
                            end
                            
                            if isTrialTime() then
                                if isInTower() then
                                    leaveTower()
                                    task.wait(3)
                                end
                                
                                if not isInTrial() then
                                    safeTeleportToLobby()
                                    task.wait(2)
                                    joinTrial()
                                    task.wait(3)
                                end
                                
                                local trialCompleted = false
                                local startTime = tick()
                                local lastTeleportTime = 0
                                
                                while _G.AutoTrialExecuting and AutoTrialEnabled and not trialCompleted do
                                    local currentWave = getCurrentWave("Trial")
                                    
                                    if currentWave >= TrialTargetWave then
                                        trialCompleted = true
                                    end
                                    
                                    if tick() - startTime > 600 then
                                        trialCompleted = true
                                    end

                                    if tick() - lastTeleportTime >= 2.5 then
                                        teleportToEnemies()
                                        lastTeleportTime = tick()
                                    end
                                    
                                    task.wait(0.5)
                                end
                                
                                if _G.AutoTrialExecuting and AutoTrialEnabled then
                                    leaveTrial()
                                    task.wait(2)
                                    safeTeleportToWorld()
                                    task.wait(5)
                                end
                            else
                                task.wait(10)
                            end
                            task.wait(1)
                        end
                    end)()
                else
                    _G.AutoTrialExecuting = false
                end
            end,
        })
        
        GamemodesTab:CreateSection("Manual Controls")
        
        GamemodesTab:CreateButton({
            Name = "Manual Start Tower",
            Callback = function()
                safeTeleportToLobby()
                task.wait(2)
                startTower()
            end,
        })
        
        GamemodesTab:CreateButton({
            Name = "Manual Join Trial",
            Callback = function()
                safeTeleportToLobby()
                task.wait(2)
                joinTrial()
            end,
        })
        
        GamemodesTab:CreateButton({
            Name = "Emergency Stop All",
            Callback = function()
                _G.AutoTowerExecuting = false
                _G.AutoTrialExecuting = false
                AutoTowerEnabled = false
                AutoTrialEnabled = false
                AutoTowerToggle:Set(false)
                AutoTrialToggle:Set(false)
                TowerStatusLabel:Set("Tower Status: Stopped")
                TrialStatusLabel:Set("Trial Status: Stopped")
            end,
        })
    end

    local function CreateAutoStarTab()
        AutoStarTab:CreateSection("Auto Star Opening")
        
        local AutoFarmDelay = 0.1
        local AutoFarmEnabled = false
        local StatusLabel = AutoStarTab:CreateLabel("Farm Status: Stopped")

        local DelaySlider = AutoStarTab:CreateSlider({
            Name = "Farm Delay",
            Range = {0, 5},
            Increment = 0.1,
            Suffix = "seconds",
            CurrentValue = 0.1,
            Flag = "FarmDelay",
            Callback = function(Value)
                AutoFarmDelay = Value
            end,
        })

        local AutoFarmToggle = AutoStarTab:CreateToggle({
            Name = "Auto Star Opening",
            CurrentValue = false,
            Flag = "AutoFarmToggle",
            Callback = function(Value)
                AutoFarmEnabled = Value
                StatusLabel:Set("Farm Status: " .. (Value and "Running" or "Stopped"))
                
                if Value then
                    if _G.AutoFarmExecuting then
                        _G.AutoFarmExecuting = false
                        task.wait(0.1)
                    end
                    
                    _G.AutoFarmExecuting = true
                    
                    while _G.AutoFarmExecuting and AutoFarmEnabled do
                        task.wait(AutoFarmDelay)
                        local farmArgs = {
                            "General",
                            "Star", 
                            "Open"
                        }
                        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Bridge"):FireServer(unpack(farmArgs))
                    end
                    
                    StatusLabel:Set("Farm Status: Stopped")
                else
                    _G.AutoFarmExecuting = false
                end
            end,
        })

        local StopFarmButton = AutoStarTab:CreateButton({
            Name = "Emergency Stop",
            Callback = function()
                _G.AutoFarmExecuting = false
                AutoFarmEnabled = false
                AutoFarmToggle:Set(false)
                StatusLabel:Set("Farm Status: Stopped")
            end,
        })
    end

    local function CreatePlayerTab()
        PlayerTab:CreateSection("Player Options")
        
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LocalPlayer = Players.LocalPlayer
        local Workspace = game:GetService("Workspace")

        local function GetPlayerModel()
            for _, obj in pairs(Workspace:GetChildren()) do
                if obj:IsA("Model") and obj.Name == LocalPlayer.Name then
                    return obj
                end
            end
            return nil
        end

        local FlyEnabled = false
        local FlySpeed = 50
        local FlyConnection
        local FlyBodyVelocity
        local FlyBodyGyro

        local function StartFly()
            local playerModel = GetPlayerModel()
            if not playerModel then return end
            
            local humanoid = playerModel:FindFirstChildOfClass("Humanoid")
            if not humanoid or not humanoid.RootPart then return end
            
            local rootPart = humanoid.RootPart
            
            FlyBodyVelocity = Instance.new("BodyVelocity")
            FlyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
            FlyBodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
            FlyBodyVelocity.Parent = rootPart
            
            FlyBodyGyro = Instance.new("BodyGyro")
            FlyBodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
            FlyBodyGyro.P = 9e4
            FlyBodyGyro.CFrame = rootPart.CFrame
            FlyBodyGyro.Parent = rootPart
            
            FlyConnection = game:GetService("RunService").Heartbeat:Connect(function()
                if not FlyEnabled or not rootPart or not rootPart.Parent then
                    if FlyConnection then
                        FlyConnection:Disconnect()
                    end
                    return
                end
                
                local cam = workspace.CurrentCamera
                FlyBodyGyro.CFrame = cam.CFrame
                
                local moveDirection = Vector3.new(0, 0, 0)
                local UIS = game:GetService("UserInputService")
                
                if UIS:IsKeyDown(Enum.KeyCode.W) then
                    moveDirection = moveDirection + cam.CFrame.LookVector
                end
                if UIS:IsKeyDown(Enum.KeyCode.S) then
                    moveDirection = moveDirection - cam.CFrame.LookVector
                end
                if UIS:IsKeyDown(Enum.KeyCode.A) then
                    moveDirection = moveDirection - cam.CFrame.RightVector
                end
                if UIS:IsKeyDown(Enum.KeyCode.D) then
                    moveDirection = moveDirection + cam.CFrame.RightVector
                end
                if UIS:IsKeyDown(Enum.KeyCode.Space) then
                    moveDirection = moveDirection + Vector3.new(0, 1, 0)
                end
                if UIS:IsKeyDown(Enum.KeyCode.LeftShift) then
                    moveDirection = moveDirection - Vector3.new(0, 1, 0)
                end
                
                if moveDirection.Magnitude > 0 then
                    moveDirection = moveDirection.Unit * FlySpeed
                end
                
                FlyBodyVelocity.Velocity = moveDirection
            end)
        end

        local function StopFly()
            if FlyBodyVelocity then
                FlyBodyVelocity:Destroy()
                FlyBodyVelocity = nil
            end
            if FlyBodyGyro then
                FlyBodyGyro:Destroy()
                FlyBodyGyro = nil
            end
            if FlyConnection then
                FlyConnection:Disconnect()
                FlyConnection = nil
            end
        end

        local FlyToggle = PlayerTab:CreateToggle({
            Name = "Enable Fly",
            CurrentValue = false,
            Flag = "FlyToggle",
            Callback = function(Value)
                FlyEnabled = Value
                if Value then
                    StartFly()
                else
                    StopFly()
                end
            end,
        })

        local FlySpeedSlider = PlayerTab:CreateSlider({
            Name = "Fly Speed",
            Range = {10, 200},
            Increment = 1,
            Suffix = "speed",
            CurrentValue = 50,
            Flag = "FlySpeed",
            Callback = function(Value)
                FlySpeed = Value
            end,
        })

        local NoClipEnabled = false
        local NoClipConnection

        local NoClipToggle = PlayerTab:CreateToggle({
            Name = "No Clip",
            CurrentValue = false,
            Flag = "NoClipToggle",
            Callback = function(Value)
                NoClipEnabled = Value
                
                if Value then
                    NoClipConnection = game:GetService("RunService").Stepped:Connect(function()
                        if not NoClipEnabled then
                            NoClipConnection:Disconnect()
                            return
                        end
                        
                        local playerModel = GetPlayerModel()
                        if playerModel then
                            for _, part in pairs(playerModel:GetDescendants()) do
                                if part:IsA("BasePart") then
                                    part.CanCollide = false
                                end
                            end
                        end
                    end)
                else
                    if NoClipConnection then
                        NoClipConnection:Disconnect()
                        NoClipConnection = nil
                    end
                    
                    local playerModel = GetPlayerModel()
                    if playerModel then
                        for _, part in pairs(playerModel:GetDescendants()) do
                            if part:IsA("BasePart") then
                                part.CanCollide = true
                            end
                        end
                    end
                end
            end,
        })

        local XRayEnabled = false
        local OriginalTransparency = {}

        local XRayToggle = PlayerTab:CreateToggle({
            Name = "X-Ray",
            CurrentValue = false,
            Flag = "XRayToggle",
            Callback = function(Value)
                XRayEnabled = Value
                
                if Value then
                    for _, part in pairs(workspace:GetDescendants()) do
                        if part:IsA("BasePart") and part.Transparency < 0.5 then
                            OriginalTransparency[part] = part.Transparency
                            part.Transparency = 0.5
                        end
                    end
                else
                    for part, transparency in pairs(OriginalTransparency) do
                        if part and part.Parent then
                            part.Transparency = transparency
                        end
                    end
                    OriginalTransparency = {}
                end
            end,
        })

        local ESPEnabled = false
        local ESPHighlights = {}

        local function CreateESP(player)
            if player == LocalPlayer then return end
            
            local highlight = Instance.new("Highlight")
            highlight.Name = "NovaHubESP"
            highlight.FillColor = Color3.fromRGB(255, 50, 50)
            highlight.FillTransparency = 0.5
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            highlight.OutlineTransparency = 0
            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            
            local character = player.Character
            if character then
                highlight.Parent = character
                highlight.Adornee = character
            end
            
            ESPHighlights[player] = highlight
            
            player.CharacterAdded:Connect(function(newChar)
                task.wait(1)
                if ESPHighlights[player] then
                    ESPHighlights[player].Adornee = newChar
                    ESPHighlights[player].Parent = newChar
                end
            end)
        end

        local function RemoveESP(player)
            if ESPHighlights[player] then
                ESPHighlights[player]:Destroy()
                ESPHighlights[player] = nil
            end
        end

        local function UpdateESP()
            if ESPEnabled then
                for _, player in pairs(Players:GetPlayers()) do
                    if player ~= LocalPlayer and not ESPHighlights[player] then
                        CreateESP(player)
                    end
                end
            else
                for player, highlight in pairs(ESPHighlights) do
                    highlight:Destroy()
                end
                ESPHighlights = {}
            end
        end

        local ESPToggle = PlayerTab:CreateToggle({
            Name = "ESP Players",
            CurrentValue = false,
            Flag = "ESPToggle",
            Callback = function(Value)
                ESPEnabled = Value
                UpdateESP()
            end,
        })

        Players.PlayerAdded:Connect(function(player)
            if ESPEnabled then
                CreateESP(player)
            end
        end)

        Players.PlayerRemoving:Connect(function(player)
            RemoveESP(player)
        end)
    end

    local function CreateMiscTab()
        MiscTab:CreateSection("Miscellaneous Settings")

        local FPSEnabled = false
        local FPSValue = 60

        local FPSToggle = MiscTab:CreateToggle({
            Name = "FPS Cap",
            CurrentValue = false,
            Flag = "FPSToggle",
            Callback = function(Value)
                FPSEnabled = Value
                if Value then
                    if setfpscap then
                        setfpscap(FPSValue)
                    end
                else
                    if setfpscap then
                        setfpscap(0)
                    end
                end
            end,
        })

        local FPSSlider = MiscTab:CreateSlider({
            Name = "FPS Value",
            Range = {1, 240},
            Increment = 1,
            Suffix = "FPS",
            CurrentValue = 60,
            Flag = "FPSValue",
            Callback = function(Value)
                FPSValue = Value
                if FPSEnabled then
                    if setfpscap then
                        setfpscap(FPSValue)
                    end
                end
            end,
        })

        local TexturesDestroyed = false
        local OriginalMaterials = {}
        local OriginalReflectances = {}
        local DestroyedDecals = {}
        local OriginalLightingSettings = {}

        local DestroyTexturesToggle = MiscTab:CreateToggle({
            Name = "Destroy Textures (Reversible)",
            CurrentValue = false,
            Flag = "DestroyTexturesToggle",
            Callback = function(Value)
                if Value and not TexturesDestroyed then
                    OriginalLightingSettings.GlobalShadows = game:GetService("Lighting").GlobalShadows
                    OriginalLightingSettings.FogEnd = game:GetService("Lighting").FogEnd
                    OriginalLightingSettings.QualityLevel = settings().Rendering.QualityLevel
                    
                    for _, v in pairs(workspace:GetDescendants()) do
                        if v:IsA("Part") or v:IsA("UnionOperation") or v:IsA("MeshPart") or v:IsA("CornerWedgePart") or v:IsA("TrussPart") or v:IsA("WedgePart") then
                            OriginalMaterials[v] = v.Material
                            OriginalReflectances[v] = v.Reflectance
                            v.Material = Enum.Material.SmoothPlastic
                            v.Reflectance = 0
                        elseif (v:IsA("Decal") or v:IsA("Texture")) and v.Parent then
                            table.insert(DestroyedDecals, {
                                Object = v,
                                Parent = v.Parent,
                                Texture = v.Texture,
                                Transparency = v.Transparency,
                                Color3 = v.Color3,
                                Face = v:IsA("Decal") and v.Face or nil
                            })
                            v.Transparency = 1
                        end
                    end
                    
                    game:GetService("Lighting").GlobalShadows = false
                    game:GetService("Lighting").FogEnd = 9e9
                    settings().Rendering.QualityLevel = 1
                    
                    TexturesDestroyed = true
                elseif not Value and TexturesDestroyed then
                    for part, material in pairs(OriginalMaterials) do
                        if part and part.Parent then
                            part.Material = material
                        end
                    end
                    
                    for part, reflectance in pairs(OriginalReflectances) do
                        if part and part.Parent then
                            part.Reflectance = reflectance
                        end
                    end
                    
                    for _, decalData in pairs(DestroyedDecals) do
                        if decalData.Object and decalData.Object.Parent then
                            decalData.Object.Transparency = decalData.Transparency
                            decalData.Object.Texture = decalData.Texture
                            decalData.Object.Color3 = decalData.Color3
                        end
                    end
                    
                    game:GetService("Lighting").GlobalShadows = OriginalLightingSettings.GlobalShadows
                    game:GetService("Lighting").FogEnd = OriginalLightingSettings.FogEnd
                    settings().Rendering.QualityLevel = OriginalLightingSettings.QualityLevel
                    
                    OriginalMaterials = {}
                    OriginalReflectances = {}
                    DestroyedDecals = {}
                    OriginalLightingSettings = {}
                    TexturesDestroyed = false
                end
            end,
        })

        local AntiAFKEnabled = false
        local AntiAFKConnection

        local AntiAFKToggle = MiscTab:CreateToggle({
            Name = "Anti-AFK",
            CurrentValue = false,
            Flag = "AntiAFKToggle",
            Callback = function(Value)
                AntiAFKEnabled = Value
                
                if Value then
                    AntiAFKConnection = game:GetService("RunService").Heartbeat:Connect(function()
                        if AntiAFKEnabled then
                            local VirtualUser = game:GetService("VirtualUser")
                            VirtualUser:CaptureController()
                            VirtualUser:ClickButton2(Vector2.new())
                        end
                    end)
                else
                    if AntiAFKConnection then
                        AntiAFKConnection:Disconnect()
                        AntiAFKConnection = nil
                    end
                end
            end,
        })
    end

    CreateHomeTab()
    CreateAutoFarmTab()
    CreateGamemodesTab()
    CreateAutoStarTab()
    CreatePlayerTab()
    CreateMiscTab()
end
end

if getgenv().NovaHubKeySystem then return end
getgenv().NovaHubKeySystem = true

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local HttpService = game:GetService("HttpService")

local Theme = {
    Background = Color3.fromRGB(10, 8, 18),
    Surface = Color3.fromRGB(18, 15, 28),
    SurfaceLight = Color3.fromRGB(25, 20, 38),
    Primary = Color3.fromRGB(147, 51, 234),
    PrimaryHover = Color3.fromRGB(168, 85, 247),
    PrimaryLight = Color3.fromRGB(196, 128, 255),
    Secondary = Color3.fromRGB(79, 70, 229),
    Text = Color3.fromRGB(250, 250, 255),
    TextDim = Color3.fromRGB(156, 163, 175),
    Success = Color3.fromRGB(34, 197, 94),
    Error = Color3.fromRGB(239, 68, 68),
    Discord = Color3.fromRGB(88, 101, 242),
    Glow = Color3.fromRGB(147, 51, 234)
}

local KeyData = {
    Name = "Nova Hub",
    DiscordInvite = "https://discord.gg/GhhAMF7B",
    SaveFile = "novahub_key.json"
}

local function Tween(obj, time, props, style, direction)
    local tween = TweenService:Create(
        obj, 
        TweenInfo.new(
            time, 
            style or Enum.EasingStyle.Quint, 
            direction or Enum.EasingDirection.Out
        ), 
        props
    )
    tween:Play()
    return tween
end

local function Create(class, props)
    local obj = Instance.new(class)
    for k, v in pairs(props) do
        if k ~= "Parent" then obj[k] = v end
    end
    if props.Parent then obj.Parent = props.Parent end
    return obj
end

local function SaveKey(key)
    local data = {key = key, timestamp = os.time()}
    writefile(KeyData.SaveFile, HttpService:JSONEncode(data))
end

local function LoadKey()
    if isfile(KeyData.SaveFile) then
        local success, data = pcall(function()
            return HttpService:JSONDecode(readfile(KeyData.SaveFile))
        end)
        if success and data.key then
            return data.key
        end
    end
    return nil
end

local function DeleteKey()
    if isfile(KeyData.SaveFile) then
        delfile(KeyData.SaveFile)
    end
end

local Gui = Create("ScreenGui", {
    Name = "NovaHubKeySystem",
    Parent = CoreGui,
    ResetOnSpawn = false,
    ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
    DisplayOrder = 999
})

local Overlay = Create("Frame", {
    Name = "Overlay",
    Parent = Gui,
    BackgroundColor3 = Color3.fromRGB(0, 0, 0),
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    Size = UDim2.new(1, 0, 1, 0),
    ZIndex = 1
})

local Container = Create("Frame", {
    Name = "Container",
    Parent = Gui,
    BackgroundColor3 = Theme.Background,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, 0, 0.5, 0),
    AnchorPoint = Vector2.new(0.5, 0.5),
    Size = UDim2.new(0, 420, 0, 500),
    ClipsDescendants = true,
    ZIndex = 2
})

Create("UICorner", {CornerRadius = UDim.new(0, 20), Parent = Container})
Create("UIStroke", {
    Parent = Container,
    Color = Theme.Primary,
    Thickness = 2,
    Transparency = 0.7,
    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
})

local GlowTop = Create("Frame", {
    Name = "GlowTop",
    Parent = Container,
    BackgroundColor3 = Theme.Glow,
    BackgroundTransparency = 0.85,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 200),
    ZIndex = 1
})

Create("UIGradient", {
    Parent = GlowTop,
    Color = ColorSequence.new(Theme.Glow),
    Transparency = NumberSequence.new({
        NumberSequenceKeypoint.new(0, 0.4),
        NumberSequenceKeypoint.new(1, 1)
    }),
    Rotation = 0
})

local Header = Create("Frame", {
    Name = "Header",
    Parent = Container,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, 0, 0, 120),
    ZIndex = 3
})

local Logo = Create("Frame", {
    Name = "Logo",
    Parent = Header,
    BackgroundColor3 = Theme.Primary,
    Position = UDim2.new(0.5, 0, 0, 35),
    Size = UDim2.new(0, 65, 0, 65),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 16), Parent = Logo})
Create("UIStroke", {
    Parent = Logo,
    Color = Theme.PrimaryLight,
    Thickness = 3,
    Transparency = 0.5
})

Create("UIGradient", {
    Parent = Logo,
    Color = ColorSequence.new(Theme.Primary, Theme.Secondary),
    Rotation = 45
})

local LogoIcon = Create("TextLabel", {
    Parent = Logo,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, 0, 1, 0),
    Text = "âš¡",
    Font = Enum.Font.GothamBold,
    TextColor3 = Color3.fromRGB(255, 255, 255),
    TextSize = 32,
    ZIndex = 5
})

local Title = Create("TextLabel", {
    Name = "Title",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0, 115),
    Size = UDim2.new(1, -40, 0, 30),
    Text = KeyData.Name,
    Font = Enum.Font.GothamBold,
    TextColor3 = Theme.Text,
    TextSize = 26,
    TextXAlignment = Enum.TextXAlignment.Center,
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

Create("UIGradient", {
    Parent = Title,
    Color = ColorSequence.new(Theme.Text, Theme.PrimaryLight),
    Rotation = 90
})

local Subtitle = Create("TextLabel", {
    Name = "Subtitle",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0, 150),
    Size = UDim2.new(1, -40, 0, 20),
    Text = "Secure Key Verification System",
    Font = Enum.Font.Gotham,
    TextColor3 = Theme.TextDim,
    TextSize = 13,
    TextXAlignment = Enum.TextXAlignment.Center,
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

local InputFrame = Create("Frame", {
    Name = "InputFrame",
    Parent = Container,
    BackgroundColor3 = Theme.Surface,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, 0, 0, 195),
    Size = UDim2.new(0, 360, 0, 55),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

Create("UICorner", {CornerRadius = UDim.new(0, 12), Parent = InputFrame})
Create("UIStroke", {
    Name = "InputStroke",
    Parent = InputFrame,
    Color = Theme.Primary,
    Thickness = 2,
    Transparency = 0.85
})

local KeyInput = Create("TextBox", {
    Name = "KeyInput",
    Parent = InputFrame,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, -30, 1, 0),
    Position = UDim2.new(0, 15, 0, 0),
    Text = "",
    PlaceholderText = "Enter your verification key...",
    Font = Enum.Font.GothamMedium,
    TextSize = 14,
    TextColor3 = Theme.Text,
    PlaceholderColor3 = Theme.TextDim,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 4
})

local ButtonGrid = Create("Frame", {
    Name = "ButtonGrid",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0, 270),
    Size = UDim2.new(0, 360, 0, 110),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 3
})

local VerifyBtn = Create("TextButton", {
    Name = "VerifyButton",
    Parent = ButtonGrid,
    BackgroundColor3 = Theme.Primary,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 0),
    Size = UDim2.new(1, 0, 0, 50),
    Text = "âœ“ Verify Key",
    Font = Enum.Font.GothamBold,
    TextSize = 16,
    TextColor3 = Color3.fromRGB(255, 255, 255),
    AutoButtonColor = false,
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 12), Parent = VerifyBtn})
Create("UIGradient", {
    Parent = VerifyBtn,
    Color = ColorSequence.new(Theme.Primary, Theme.Secondary),
    Rotation = 45
})

local GetKeyBtn = Create("TextButton", {
    Name = "GetKeyButton",
    Parent = ButtonGrid,
    BackgroundColor3 = Theme.Surface,
    BorderSizePixel = 0,
    Position = UDim2.new(0, 0, 0, 60),
    Size = UDim2.new(0.485, 0, 0, 45),
    Text = "ðŸ”‘ Get Key",
    Font = Enum.Font.GothamBold,
    TextSize = 14,
    TextColor3 = Theme.Text,
    AutoButtonColor = false,
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 10), Parent = GetKeyBtn})
Create("UIStroke", {
    Parent = GetKeyBtn,
    Color = Theme.Primary,
    Thickness = 2,
    Transparency = 0.7
})

local DiscordBtn = Create("TextButton", {
    Name = "DiscordButton",
    Parent = ButtonGrid,
    BackgroundColor3 = Theme.Discord,
    BorderSizePixel = 0,
    Position = UDim2.new(0.515, 0, 0, 60),
    Size = UDim2.new(0.485, 0, 0, 45),
    Text = "ðŸ’¬ Discord",
    Font = Enum.Font.GothamBold,
    TextSize = 14,
    TextColor3 = Color3.fromRGB(255, 255, 255),
    AutoButtonColor = false,
    ZIndex = 4
})

Create("UICorner", {CornerRadius = UDim.new(0, 10), Parent = DiscordBtn})

local Footer = Create("Frame", {
    Name = "Footer",
    Parent = Container,
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 0, 1, -60),
    Size = UDim2.new(1, 0, 0, 60),
    ZIndex = 3
})

local StatusText = Create("TextLabel", {
    Name = "StatusText",
    Parent = Footer,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 0.5, 0),
    Size = UDim2.new(1, -40, 0, 20),
    Text = "",
    Font = Enum.Font.GothamMedium,
    TextColor3 = Theme.TextDim,
    TextSize = 12,
    TextXAlignment = Enum.TextXAlignment.Center,
    AnchorPoint = Vector2.new(0.5, 0.5),
    ZIndex = 4
})

local Notification = Create("Frame", {
    Name = "Notification",
    Parent = Gui,
    BackgroundColor3 = Theme.Surface,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, 0, 0, -100),
    Size = UDim2.new(0, 350, 0, 60),
    AnchorPoint = Vector2.new(0.5, 0),
    ZIndex = 10,
    ClipsDescendants = true
})

Create("UICorner", {CornerRadius = UDim.new(0, 12), Parent = Notification})
Create("UIStroke", {
    Name = "NotifStroke",
    Parent = Notification,
    Color = Theme.Primary,
    Thickness = 2
})

local NotifText = Create("TextLabel", {
    Parent = Notification,
    BackgroundTransparency = 1,
    Size = UDim2.new(1, -30, 1, 0),
    Position = UDim2.new(0, 15, 0, 0),
    Text = "",
    Font = Enum.Font.GothamBold,
    TextColor3 = Theme.Text,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 11
})

local notificationActive = false

local function ShowNotification(text, color)
    if notificationActive then
        Notification.Position = UDim2.new(0.5, 0, 0, -100)
        task.wait(0.1)
    end
    
    notificationActive = true
    NotifText.Text = text
    Notification.BackgroundColor3 = color
    Notification.NotifStroke.Color = color
    
    local slideIn = Tween(Notification, 0.6, {Position = UDim2.new(0.5, 0, 0, 30)}, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    
    task.delay(3, function()
        if notificationActive then
            Tween(Notification, 0.5, {Position = UDim2.new(0.5, 0, 0, -100)}, Enum.EasingStyle.Back, Enum.EasingDirection.In)
            task.wait(0.5)
            notificationActive = false
        end
    end)
end

local function AddHover(btn, hoverColor)
    local original = btn.BackgroundColor3
    btn.MouseEnter:Connect(function()
        Tween(btn, 0.3, {BackgroundColor3 = hoverColor or Theme.PrimaryHover}, Enum.EasingStyle.Sine)
        Tween(btn, 0.3, {Size = btn.Size + UDim2.new(0, 0, 0, 3)}, Enum.EasingStyle.Sine)
    end)
    btn.MouseLeave:Connect(function()
        Tween(btn, 0.3, {BackgroundColor3 = original}, Enum.EasingStyle.Sine)
        Tween(btn, 0.3, {Size = btn.Size - UDim2.new(0, 0, 0, 3)}, Enum.EasingStyle.Sine)
    end)
end

AddHover(VerifyBtn, Theme.PrimaryHover)
AddHover(GetKeyBtn, Theme.SurfaceLight)
AddHover(DiscordBtn, Color3.fromRGB(100, 113, 255))

KeyInput.Focused:Connect(function()
    Tween(InputFrame.InputStroke, 0.3, {Transparency = 0.3, Thickness = 2.5}, Enum.EasingStyle.Sine)
    Tween(InputFrame, 0.3, {BackgroundColor3 = Theme.SurfaceLight}, Enum.EasingStyle.Sine)
end)

KeyInput.FocusLost:Connect(function()
    Tween(InputFrame.InputStroke, 0.3, {Transparency = 0.85, Thickness = 2}, Enum.EasingStyle.Sine)
    Tween(InputFrame, 0.3, {BackgroundColor3 = Theme.Surface}, Enum.EasingStyle.Sine)
end)

local function GetKeyLink()
    local success, JunkieKeySystem = pcall(function()
        return loadstring(game:HttpGet("https://junkie-development.de/sdk/JunkieKeySystem.lua"))()
    end)
    
    if not success then
        ShowNotification("âœ— Failed to load key system", Theme.Error)
        return
    end
    
    local link = JunkieKeySystem.getLink(Config.api, Config.provider, Config.service)
    if link then
        if setclipboard then
            setclipboard(link)
            ShowNotification("âœ“ Key link copied to clipboard!", Theme.Success)
        else
            ShowNotification("Link: " .. link, Theme.Success)
        end
    else
        ShowNotification("âœ— Failed to generate key link", Theme.Error)
    end
end

local function ValidateKey()
    local key = KeyInput.Text:gsub("%s+", "")
    if key == "" then
        ShowNotification("âœ— Please enter a valid key", Theme.Error)
        return
    end
    
    StatusText.Text = "â³ Validating key..."
    StatusText.TextColor3 = Theme.Primary
    
    local success, JunkieKeySystem = pcall(function()
        return loadstring(game:HttpGet("https://junkie-development.de/sdk/JunkieKeySystem.lua"))()
    end)
    
    if not success then
        ShowNotification("âœ— Connection error", Theme.Error)
        StatusText.Text = ""
        return
    end
    
    local isValid = JunkieKeySystem.verifyKey(Config.api, key, Config.service)
    
    if isValid then
        SaveKey(key)
        ShowNotification("âœ“ Key validated successfully!", Theme.Success)
        StatusText.Text = "âœ“ Access granted"
        StatusText.TextColor3 = Theme.Success
        
        Tween(Logo, 0.4, {Rotation = 360}, Enum.EasingStyle.Back)
        task.wait(0.2)
        
        Tween(Container, 0.7, {Size = UDim2.new(0, 420, 0, 0), Position = UDim2.new(0.5, 0, 0.5, 0)}, Enum.EasingStyle.Back, Enum.EasingDirection.In)
        Tween(Overlay, 0.7, {BackgroundTransparency = 1}, Enum.EasingStyle.Sine)
        
        task.wait(0.8)
        Gui:Destroy()
        main()
    else
        DeleteKey()
        ShowNotification("âœ— Invalid key. Please try again", Theme.Error)
        StatusText.Text = "âœ— Validation failed"
        StatusText.TextColor3 = Theme.Error
        
        for i = 1, 4 do
            Tween(Container, 0.06, {Position = UDim2.new(0.5, i % 2 == 0 and -20 or 20, 0.5, 0)}, Enum.EasingStyle.Elastic)
            task.wait(0.06)
        end
        Tween(Container, 0.2, {Position = UDim2.new(0.5, 0, 0.5, 0)}, Enum.EasingStyle.Elastic)
        
        task.delay(2.5, function()
            Tween(StatusText, 0.3, {TextTransparency = 1}, Enum.EasingStyle.Sine)
            task.wait(0.3)
            StatusText.Text = ""
            StatusText.TextTransparency = 0
        end)
    end
end

VerifyBtn.MouseButton1Click:Connect(ValidateKey)
GetKeyBtn.MouseButton1Click:Connect(GetKeyLink)

DiscordBtn.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard(KeyData.DiscordInvite)
        ShowNotification("âœ“ Discord invite copied!", Theme.Discord)
    else
        ShowNotification(KeyData.DiscordInvite, Theme.Discord)
    end
end)

KeyInput.FocusLost:Connect(function(enter)
    if enter then ValidateKey() end
end)

local dragging, dragInput, dragStart, startPos

Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Container.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        Container.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

Container.Size = UDim2.new(0, 0, 0, 0)
Overlay.BackgroundTransparency = 1

Tween(Overlay, 0.6, {BackgroundTransparency = 0.4}, Enum.EasingStyle.Sine)
Tween(Container, 0.8, {Size = UDim2.new(0, 420, 0, 500)}, Enum.EasingStyle.Back, Enum.EasingDirection.Out)

task.spawn(function()
    while Container.Parent do
        Tween(Logo, 1.5, {Rotation = 5}, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
        task.wait(1.5)
        Tween(Logo, 1.5, {Rotation = -5}, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
        task.wait(1.5)
    end
end)

local savedKey = LoadKey()
if savedKey then
    KeyInput.Text = savedKey
    StatusText.Text = "Using saved key..."
    StatusText.TextColor3 = Theme.Primary
    task.wait(0.5)
    ValidateKey()
end
